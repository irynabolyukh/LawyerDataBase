{% extends "base_generic.html" %}
{% load user_tags %}
{% block title %}–ü—Ä–æ—Ñ—ñ–ª—å –∞–¥–≤–æ–∫–∞—Ç–∞{% endblock %}

{% block navbar %}
{% if request.user|has_group:"–°–µ–∫—Ä–µ—Ç–∞—Ä"%}
    <a class="navbar-brand" href="{% url 'lawyers' %}">ü¢Ä–£—Å—ñ –∞–¥–≤–æ–∫–∞—Ç–∏</a>
{% endif %}
{% if request.user|has_group:"–ê–¥–≤–æ–∫–∞—Ç"%}
    <h2 style="color: white">–ú—ñ–π –∫–∞–±—ñ–Ω–µ—Ç</h2>
{% endif %}
{% endblock %}
{% block content %}
<div class="container">
    <div class="row">
        <div class="col-sm-4">
            <h2>–ü—Ä–æ—Ñ—ñ–ª—å –∞–¥–≤–æ–∫–∞—Ç–∞</h2>
            <h4 id="specialization">{{ lawyer.specialization }}</h4>
            <h6 id="la_code">{{ lawyer.lawyer_code }}</h6>
            <h6 id="name">{{ lawyer.first_name }} {{ lawyer.surname }} {{ lawyer.mid_name }}</h6>
            <h6 id="mail">{{ lawyer.mail_info}} </h6>
            <h5>–ù–∞–¥–∞—î –ø–æ—Å–ª—É–≥–∏:</h5>
            {% for service in lawyer.service.all %}
                <h6 id="service">
                    <a href=" {% url 'service-detailed-view' service.service_code %}">
                        {{ service.name_service }}
                    </a>
                </h6>
            {% endfor %}
            <h5>–†–æ–±–æ—á—ñ –¥–Ω—ñ:</h5>
            {% for day in lawyer.work_days.all %}
                <h6 id="work_days">{{ day }}</h6>
            {% endfor %}
            <h5>–¢–µ–ª–µ—Ñ–æ–Ω–∏:</h5>
               {% for phone in phones %}
            <div><a href="tel:+380{{phone.phone_num}}">+380{{phone.phone_num}}</a></div>
                {% endfor %}
        {% if dossier_j or dossier_n %}
             {% if request.user|has_group:"–°–µ–∫—Ä–µ—Ç–∞—Ä"%}
                <div>
                    <a class="btn btn-outline-info" href="{% url 'lawyer-update' pk=object.pk %}">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a>
                    <a class="btn btn-outline-danger" href="{% url 'lawyer-delete' pk=object.pk %}">–í–∏–¥–∞–ª–∏—Ç–∏</a>
                </div>
            {% endif %}

            <h3>–î–æ—Å—å—î</h3>

            <ul class="nav nav-pills flex-column">
            {% for dossier in dossier_n %}
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'dossier-detailed-n' dossier.code_dossier_n %}">{{ dossier.issue }}</a>
                </li>
            {% endfor %}
            {% for dossier in dossier_j %}
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'dossier-detailed-j' dossier.code_dossier_j %}">{{ dossier.issue }}</a>
                </li>
            {% endfor %}
            </ul>
        {% endif %}
        </div>
        <div class="col-sm-8">
            <h2>–í—Å—å–æ–≥–æ –∑–∞–∫—Ä–∏—Ç–æ —Å–ø—Ä–∞–≤</h2>

            {% for obj in closed_dossiers_n %}
                  <p>–ù–∞—Ç—É—Ä–∞–ª—å–Ω–∏—Ö: {{obj.counted_dossiers}}</p>
            {% endfor %}
            {% for obj1 in closed_dossiers_j %}
                <p>–Æ—Ä–∏–¥–∏—á–Ω–∏—Ö: {{obj1.counted_dossiers}}</p>
            {% endfor %}
            <p></p>
            <br>
            <h2 >–ó–∞–≥–∞–ª—å–Ω–∏–π –¥–æ—Ö—ñ–¥</h2>
            <h5>–ó–∞–≥–∞–ª–æ–º: <b id="income_total">0</b></h5>
            <h5 id="income_nom">–ù–æ–º—ñ–Ω–∞–ª—å–Ω–∏–π: {{ nominal_value }}</h5>
            <h5 id="income_bonus">–ë–æ–Ω—É—Å–Ω–∏–π: {{ bonus_value }}</h5>
        </div>

    </div>

{% if upcoming_app_j or upcoming_app_n %}
    <div class="row">
        <div class="container">
            <br>
            <h2 class="text-center">–ó–∞–ø–∏—Å–∏</h2>
            <h4>–ú–∞–π–±—É—Ç–Ω—ñ</h4>
            <table class="table table-striped">
                <thead class="thead-dark">
                <tr>
                    <th>–ö–ª—ñ—î–Ω—Ç</th>
                    <th>–ü–æ—Å–ª—É–≥–∞</th>
                    <th>–î–∞—Ç–∞</th>
                    <th>–ß–∞—Å</th>
                    <th>–ö–æ–º–µ–Ω—Ç–∞—Ä—ñ–π</th>
                    <th>–°—É—Ç—å —Å–ø—Ä–∞–≤–∏</th>
                </tr>
                </thead>
                <tbody>
                {% for appointment in upcoming_app_j %}
                <tr>
                    <td>{{appointment.num_client_j.getfullname }}</td>
                    <td>
                    {% for service in appointment.service.all %}
                    <a href="{% url 'service-detailed-view' service.service_code %}">
                        {{service.name_service }}
                    </a>;
                    {% endfor %}
                    </td>
                    <td>{{appointment.app_date|date:"d.m.Y"}}</td>
                    <td>{{appointment.app_time|time:"H:i"}}</td>
                    <td>{{appointment.comment}}</td>
                    <td>{{appointment.code_dossier_j.issue }}</td>
                </tr>
                {% endfor %}
                {% for appointment in upcoming_app_n %}
                <tr>
                    <td>{{appointment.num_client_n.getfullname }}</td>
                    <td>
                    {% for service in appointment.service.all %}
                    <a href=" {% url 'service-detailed-view' service.service_code %}">
                        {{ service.name_service }}
                    </a>;
                    {% endfor %}
                    </td>
                    <td>{{appointment.app_date|date:"d.m.Y"}}</td>
                    <td>{{appointment.app_time|time:"H:i"}}</td>
                    <td>{{appointment.comment}}</td>
                    <td>{{appointment.code_dossier_n.issue }}</td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    {% endif %}

    {% if appointments_j or appointments_n %}
    <div class="row">
        <div class="container">
            <h4>–ú–∏–Ω—É–ª—ñ</h4>
            <table class="table table-striped">
                <thead class="thead-dark">
                <tr>
                    <th>–ö–ª—ñ—î–Ω—Ç</th>
                    <th>–ü–æ—Å–ª—É–≥–∞</th>
                    <th>–î–∞—Ç–∞</th>
                    <th>–ß–∞—Å</th>
                    <th>–ö–æ–º–µ–Ω—Ç–∞—Ä—ñ–π</th>
                    <th>–°—É—Ç—å —Å–ø—Ä–∞–≤–∏</th>
                </tr>
                </thead>
                <tbody>
                {% for appointment in appointments_j %}
                <tr>
                    <td>{{appointment.num_client_j.getfullname }}</td>
                    <td>
                    {% for service in appointment.service.all %}
                    <a href=" {% url 'service-detailed-view' service.service_code %}">
                        {{ service.name_service }}
                    </a>;
                    {% endfor %}
                    </td>
                    <td>{{appointment.app_date|date:"d.m.Y"}}</td>
                    <td>{{appointment.app_time|time:"H:i"}}</td>
                    <td>{{appointment.comment}}</td>
                    <td>{{appointment.code_dossier_j.issue }}</td>
                </tr>
                {% endfor %}
                {% for appointment in appointments_n %}
                <tr>
                    <td>{{appointment.num_client_n.getfullname }}</td>
                    <td>
                    {% for service in appointment.service.all %}
                    <a href=" {% url 'service-detailed-view' service.service_code %}">
                        {{ service.name_service }}
                    </a>;
                    {% endfor %}
                    </td>
                    <td>{{appointment.app_date|date:"d.m.Y"}}</td>
                    <td>{{appointment.app_time|time:"H:i"}}</td>
                    <td>{{appointment.comment}}</td>
                    <td>{{appointment.code_dossier_n.issue }}</td>
                </tr>
                {% endfor %}
                </tbody>
            </table>

        </div>
    </div>

</div>
    {% endif %}
{% endblock %}

{% block script %}
    {% load static %}
<script src="{% static 'docs/js/main.js' %}"></script>
{% endblock %}