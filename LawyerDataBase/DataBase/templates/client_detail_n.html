{% extends "base_generic.html" %}
{% load user_tags %}
{% block title %}–ü—Ä–æ—Ñ—ñ–ª—å –∫–ª—ñ—î–Ω—Ç–∞{% endblock %}
{% block navbar %}
{% if request.user|has_group:"–°–µ–∫—Ä–µ—Ç–∞—Ä"%}
       <div class="nav-item mr-5">
            <a class="navbar-brand" href="{% url 'ncustomers' %}">ü¢Ä–£—Å—ñ —Ñ—ñ–∑–∏—á–Ω—ñ –∫–ª—ñ—î–Ω—Ç–∏</a>
        </div>
       <div class="nav-item">
            <a class="navbar-brand" href="{% url 'lawyers' %}">–ê–¥–≤–æ–∫–∞—Ç–∏</a>
        </div>
        <div class="nav-item ">
            <a class="navbar-brand" href="{% url 'services' %}">–ü–æ—Å–ª—É–≥–∏</a>
        </div>
        <div class="nav-item dropdown">
            <a class="navbar-brand dropdown-toggle" href="#" data-toggle="dropdown">
                –ö–ª—ñ—î–Ω—Ç–∏
            </a>
            <div class="dropdown-menu">
                <a class="nav-link dropdown-item" href="{% url 'jcustomers' %}">–Æ—Ä–∏–¥–∏—á–Ω—ñ –∫–ª—ñ—î–Ω—Ç–∏</a>
                <a class="nav-link dropdown-item" href="{% url 'ncustomers' %}">–§—ñ–∑–∏—á–Ω—ñ –∫–ª—ñ—î–Ω—Ç–∏</a>
            </div>
        </div>
        <div class="nav-item dropdown">
            <a class="navbar-brand dropdown-toggle" href="#"  data-toggle="dropdown">
                –î–æ—Å—å—î
            </a>
            <div class="dropdown-menu">
                <a class="nav-link dropdown-item" href="{% url 'jdossiers' %}">–Æ—Ä–∏–¥–∏—á–Ω—ñ –¥–æ—Å—å—î</a>
                <a class="nav-link dropdown-item" href="{% url 'ndossiers' %}">–§—ñ–∑–∏—á–Ω—ñ –¥–æ—Å—å—î</a>
            </div>
        </div>
        <div class="nav-item dropdown">
            <a class="navbar-brand dropdown-toggle" href="#"  data-toggle="dropdown">
                –ó–∞–ø–∏—Å–∏
            </a>
            <div class="dropdown-menu">
                <a class="nav-link dropdown-item" href="{% url 'jappointments' %}">–Æ—Ä–∏–¥–∏—á–Ω—ñ –∑–∞–ø–∏—Å–∏</a>
                <a class="nav-link dropdown-item" href="{% url 'nappointments' %}">–§—ñ–∑–∏—á–Ω—ñ –∑–∞–ø–∏—Å–∏</a>
            </div>
        </div>
        <div class="nav-item">
            <a  class="navbar-brand" href="{% url 'register' %}"> –î–æ–¥–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</a>
        </div>
        <div class="nav-item">
            <a class="navbar-brand" href="{% url 'stats' %}">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
        </div>
{% endif %}
{% if request.user|has_group:"–§—ñ–∑–∏—á–Ω–∏–π –∫–ª—ñ—î–Ω—Ç"%}
<div class="container-fluid row align-items-center justify-content-center">
    <h2 style="color: white">–ú—ñ–π –ø—Ä–æ—Ñ—ñ–ª—å</h2>
</div>
{% endif %}
{% if request.user|has_group:"–ê–¥–≤–æ–∫–∞—Ç"%}
 <a class="navbar-brand" href="#" onclick="goBack()">ü¢Ä–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—å –¥–æ –∫–∞–±—ñ–Ω–µ—Ç—É</a>
{% endif %}
{% endblock %}
{% block content %}
<div></div>
<div class="container">
<div style="margin-top: 3%" class="container-fluid margin-fix row align-items-center justify-content-center">
    <div class="card row align-items-center justify-content-center shadow-lg p-4 mb-4 bg-white" style="width: 50%;">
        <h5> {{ client_natural.first_name }} {{ client_natural.surname }} {{ client_natural.mid_name }}</h5>
        <h6>–Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ–π–Ω–∏–π –∫–æ–¥: {{ client_natural.num_client_n }}</h6>
        <h6>–ê–¥—Ä–µ—Å–∞: {{ client_natural.adr_city }}, {{ client_natural.adr_street }}, {{ client_natural.adr_build }}</h6>
        <h6>–î–∞—Ç–∞ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è: {{ client_natural.birth_date|date:"d.m.Y" }}</h6>
        <h6>–ü–∞—Å–ø–æ—Ä—Ç–Ω—ñ –¥–∞–Ω—ñ: {{ client_natural.passport_date|date:"d.m.Y" }}  {{ client_natural.passport_authority }}</h6>
        <h6>E-mail: <a href=mailto:client_natural.mail_info>{{ client_natural.mail_info }}</a></h6>
        <h6>–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É:
            {% for phone in phones %}
                <div><a href="tel:+380{{phone.phone_num}}">+380{{phone.phone_num}}</a></div>
            {% endfor %}
        </h6>
        <div class="container row align-items-center justify-content-center">

                <div  class="container row align-items-center justify-content-center">
                    {% if request.user|has_group:"–§—ñ–∑–∏—á–Ω–∏–π –∫–ª—ñ—î–Ω—Ç"%}
                    <br><a style="margin: 1%;" class="btn btn-outline-info btn-block" href="{% url 'client_natural-update' pk=object.pk %}">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a>
                    {% endif %}
                     {% if request.user|has_group:"–°–µ–∫—Ä–µ—Ç–∞—Ä"%}
                    <br><br><a style="margin: 1%;" class="btn btn-outline-info btn-block" href="{% url 'client_natural-update' pk=object.pk %}">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a>
                    <br><br>
                        <a style="margin: 1%;" class="btn btn-outline-info" href="{% url 'dossier_n-create' %}">–ù–æ–≤–µ –î–æ—Å—å—î</a>
                        <a style="margin: 1%;" class="btn btn-outline-info" href="{% url 'appointment_n-create' %}">–ó–∞–ø–∏—Å–∞—Ç–∏ –Ω–∞ –ø–æ—Å–ª—É–≥—É</a>
                        {% endif %}
                </div>
        </div>
    </div>
</div>
<div class="container-fluid row align-items-center justify-content-center">
{% if request.user|has_group:"–§—ñ–∑–∏—á–Ω–∏–π –∫–ª—ñ—î–Ω—Ç"%}
<div class="container row align-items-center justify-content-center">
        <a class="btn btn-outline-info" href="{% url 'appointment_n-create' %}">–ó–∞–ø–∏—Å–∞—Ç–∏—Å—è –Ω–∞ –ø–æ—Å–ª—É–≥—É</a>
</div>
</div>
{% endif %}
{% if not request.user|has_group:"–ê–¥–≤–æ–∫–∞—Ç"%}
<hr>
    <div class="container mt-5">
        <h2 class="text-center">–ó–∞–ø–∏—Å–∏</h2>
        {% if upcoming_app_n %}
    <h5>–ú–∞–π–±—É—Ç–Ω—ñ</h5>
    <table class="table table-striped table-hover table_border">
        <thead class="thead-dark">
        <tr>
            <th>–î–∞—Ç–∞</th>
            <th>–ß–∞—Å</th>
            <th>–ö–æ–º–µ–Ω—Ç–∞—Ä</th>
            <th>–ü–æ—Å–ª—É–≥–∞</th>
            <th>–ê–¥–≤–æ–∫–∞—Ç</th>
            <th>–î–æ—Å—å—î</th>
            {% if request.user|has_group:"–°–µ–∫—Ä–µ—Ç–∞—Ä"%}
            <th></th>
            {% endif %}
        </tr>
        </thead>
        <tbody>
        {% for appointment in upcoming_app_n %}
        <tr>
            <td>{{ appointment.app_date|date:"d.m.Y" }}</td>
            <td>{{ appointment.app_time|time:"H:i" }}</td>
            <td>{{ appointment.comment }}</td>
            {% if request.user|has_group:"–°–µ–∫—Ä–µ—Ç–∞—Ä"%}
            <td>
                {% for service in appointment.service.all %}
               <div><a href="{% url 'service-detailed-view' service.service_code %}">
                {{ service.name_service }}
                </a>;</div>
                {% endfor %}
            </td>
             {% endif %}
            {% if request.user|has_group:"–§—ñ–∑–∏—á–Ω–∏–π –∫–ª—ñ—î–Ω—Ç"%}
            <td>
                {% for service in appointment.service.all %}
                {{ service.name_service }};
                {% endfor %}
            </td>
             {% endif %}
             {% if request.user|has_group:"–ê–¥–≤–æ–∫–∞—Ç"%}
            <td>
                {% for service in appointment.service.all %}
                {{ service.name_service }};
                {% endfor %}
            </td>
             {% endif %}
             {% if request.user|has_group:"–°–µ–∫—Ä–µ—Ç–∞—Ä"%}
            <td><a href="{% url 'lawyer-detailed-view'  appointment.lawyer_code.lawyer_code %}">
                    {{appointment.lawyer_code.getfullname}}
                </a></td>
            {% endif %}
             {% if request.user|has_group:"–§—ñ–∑–∏—á–Ω–∏–π –∫–ª—ñ—î–Ω—Ç"%}
            <td>{{appointment.lawyer_code.getfullname}}</td>
            {% endif %}
            {% if request.user|has_group:"–ê–¥–≤–æ–∫–∞—Ç"%}
            <td>{{appointment.lawyer_code.getfullname}}</td>
            {% endif %}

            <td>
                <a href="{% url 'dossier-detailed-n' appointment.code_dossier_n.code_dossier_n%}">
                    {{ appointment.code_dossier_n.code_dossier_n }}
                </a>
            </td>

            {% if request.user|has_group:"–°–µ–∫—Ä–µ—Ç–∞—Ä"%}
            <td>
                <a class="btn btn-outline-info" href="{% url 'appointment_n-update' pk=appointment.pk %}">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a>
                <a class="btn btn-outline-danger" href="{% url 'appointment_n-delete' pk=appointment.pk  %}">–í–∏–¥–∞–ª–∏—Ç–∏</a>
            </td>
            {% endif %}
        </tr>
        {% endfor %}
        </tbody>
    </table>
    </div>

    {% endif %}

    {% if appointments_n %}
    <div class="container">
    <h5>–ú–∏–Ω—É–ª—ñ</h5>
    <table class="table table-striped table-hover table_border">
        <thead class="thead-dark">
        <tr>
            <th>–î–∞—Ç–∞</th>
            <th>–ß–∞—Å</th>
            <th>–ö–æ–º–µ–Ω—Ç–∞—Ä</th>
            <th>–ü–æ—Å–ª—É–≥–∞</th>
            <th>–ê–¥–≤–æ–∫–∞—Ç</th>
            <th>–î–æ—Å—å—î</th>
            {% if request.user|has_group:"–°–µ–∫—Ä–µ—Ç–∞—Ä"%}
            <th></th>
            {% endif %}
        </tr>
        </thead>
        <tbody>
        {% for appointment in appointments_n %}
        <tr>
            <td>{{ appointment.app_date|date:"d.m.Y" }}</td>
            <td>{{ appointment.app_time|time:"H:i" }}</td>
            <td>{{ appointment.comment }}</td>
            {% if request.user|has_group:"–°–µ–∫—Ä–µ—Ç–∞—Ä"%}
            <td>
                {% for service in appointment.service.all %}
               <div><a href="{% url 'service-detailed-view' service.service_code %}">
                {{ service.name_service }}
                </a>;</div>
                {% endfor %}
            </td>
             {% endif %}
            {% if request.user|has_group:"–§—ñ–∑–∏—á–Ω–∏–π –∫–ª—ñ—î–Ω—Ç"%}
            <td>
                {% for service in appointment.service.all %}
                {{ service.name_service }};
                {% endfor %}
            </td>
             {% endif %}
             {% if request.user|has_group:"–ê–¥–≤–æ–∫–∞—Ç"%}
            <td>
                {% for service in appointment.service.all %}
                {{ service.name_service }};
                {% endfor %}
            </td>
             {% endif %}
             {% if request.user|has_group:"–°–µ–∫—Ä–µ—Ç–∞—Ä"%}
            <td><a href="{% url 'lawyer-detailed-view'  appointment.lawyer_code.lawyer_code %}">
                    {{appointment.lawyer_code.getfullname}}
                </a></td>
            {% endif %}
             {% if request.user|has_group:"–§—ñ–∑–∏—á–Ω–∏–π –∫–ª—ñ—î–Ω—Ç"%}
            <td>{{appointment.lawyer_code.getfullname}}</td>
            {% endif %}
            {% if request.user|has_group:"–ê–¥–≤–æ–∫–∞—Ç"%}
            <td>{{appointment.lawyer_code.getfullname}}</td>
            {% endif %}

            <td>
                <a href="{% url 'dossier-detailed-n' appointment.code_dossier_n.code_dossier_n%}">
                    {{ appointment.code_dossier_n.code_dossier_n }}
                </a>
            </td>

            {% if request.user|has_group:"–°–µ–∫—Ä–µ—Ç–∞—Ä"%}
            <td>
                <a class="btn btn-outline-danger" href="{% url 'appointment_n-delete' pk=appointment.pk  %}">–í–∏–¥–∞–ª–∏—Ç–∏</a>
            </td>
            {% endif %}
        </tr>
        {% endfor %}
        </tbody>
    </table>
    </div>

    {% endif %}
    {% if dossiers %}
    <div class="container mt-5">
         <h2 class="text-center">–î–æ—Å—å—î</h2>
    <table class="table table-striped table-hover table_border">
        <thead class="thead-dark">
        <tr>
            <th>–ö–æ–¥</th>
            <th>–°—É—Ç—å —Å–ø—Ä–∞–≤–∏</th>
            <th>–ì–æ–Ω–æ—Ä–∞—Ä</th>
            <th>–î–∞—Ç–∞ –ø—ñ–¥–ø–∏—Å–∞–Ω–Ω—è</th>
            <th>–î–∞—Ç–∞ —Å–ø–ª–∏–≤—É</th>
            <th>–°—Ç–∞—Ç—É—Å</th>
            <th>–î–∞—Ç–∞ –∑–∞–∫—Ä–∏—Ç—Ç—è</th>
            <th>–û–ø–ª–∞—á–µ–Ω–æ</th>
             {% if request.user|has_group:"–°–µ–∫—Ä–µ—Ç–∞—Ä"%}
            <th></th>
            {% endif %}
        </tr>
        </thead>
        <tbody>
        {% for dossier in dossiers.all %}
        <tr>
            <td><a href="{% url 'dossier-detailed-n' dossier.code_dossier_n %}">{{ dossier.code_dossier_n }}</a></td>
            <td>{{ dossier.issue }}</td>
            <td>{{ dossier.fee }} UAH</td>
            <td>{{ dossier.date_signed|date:"d.m.Y" }}</td>
            <td>{{ dossier.date_expired|date:"d.m.Y" }}</td>
            {% if dossier.status == 'open' %}
            <td>–í—ñ–¥–∫—Ä–∏—Ç–∞</td>
            {% elif dossier.status == 'closed' %}
            <td>–ó–∞–∫—Ä–∏—Ç–∞</td>
            {% else %}
            <td>–ó–∞–∫—Ä–∏—Ç–∞(–≤–∏–≥—Ä–∞–Ω–∞)</td>
            {% endif %}
            {% if dossier.status == 'closed' or dossier.status == 'closed-won'  %}
            <td>{{ dossier.date_closed|date:"d.m.Y" }}</td>
            {% else %}
            <td>-------</td>
            {% endif %}
            {% if dossier.paid is True %}
            <td>–û–ø–ª–∞—á–µ–Ω–æ</td>
            {% else %}
            <td>–ù–µ –æ–ø–ª–∞—á–µ–Ω–æ</td>
            {% endif %}
             {% if request.user|has_group:"–°–µ–∫—Ä–µ—Ç–∞—Ä"%}
            <td>
                {% if not dossier.paid %}
                <a class="btn btn-outline-info" href="{% url 'dossier_n-update' pk=dossier.pk  %}">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a>
                 {% endif %}
                <a class="btn btn-outline-danger" href="{% url 'dossier_n-delete' pk=dossier.pk  %}">–í–∏–¥–∞–ª–∏—Ç–∏</a>
            </td>
            {% endif %}
        </tr>
        {% endfor %}
        </tbody>
    </table>
        </div>
    {% endif %}
        {% if request.user|has_group:"–°–µ–∫—Ä–µ—Ç–∞—Ä"%}
                <div  class="container row align-items-center justify-content-center">
                    <a style="margin: 1%;" class="btn btn-outline-danger btn-block" href="{% url 'client_natural-delete' pk=object.pk %}">–í–∏–¥–∞–ª–∏—Ç–∏</a></div>
        {% endif %}
{% endif %}
</div>
<script>
        function goBack() {
            window.history.back();
        }
</script>
{% endblock %}